# GUI設計見直し 計画メモ（2025-12-24）

## 方針
- プレビューはウィジェットサイズに追従して伸縮表示する（操作性を優先）。
- 出力は固定 `figsize` を維持し、プレビューには `bbox_inches="tight" + pad_inches` 相当の範囲を破線で表示する。
- プレビューと出力の「見た目一致」よりも、「出力範囲がどこか」を把握できることを優先する。

## 追加する出力オプション
- 出力サイズをインチ指定で入力可能にする。
  - `figsize_w_in`, `figsize_h_in` を UI で指定。
  - 出力はこのサイズを基準にし、`pad_inches` で外周を足す。
  - プレビューは追従しない（破線で出力範囲を可視化）。

## 実装概要
- `OutputOptions` に `figsize_w_in`, `figsize_h_in` を追加（既定は 6x4 in）。
- GUI に出力サイズ入力欄（インチ）を追加。
- 出力処理は `OutputOptions` の `figsize` を参照して出力。
- プレビューは従来どおり描画し、破線の出力範囲表示を維持。

## 補足
- `pad_inches` の破線表示は DPI 変換でピクセル化しているため、出力範囲の把握は継続できる。

## 追加検討（プレビュー=出力の設計）
- プレビューを子ウィンドウで独立表示し、ウィンドウサイズ変更に応じて `figsize` を再計算する。
- 出力は「その時点のプレビュー描画」を保存することで見た目一致を優先する。
- OS の表示スケーリングにより出力サイズ（px）が変わる可能性があるため、`dpi` と Tk の `scaling` を固定する案を検討する。
- 破線表示は「出力範囲」ではなく「描画領域」を表す役割に変更する。

## UI再編成（左側）
- 細かいグループ分けでUXを改善する。
- 左側の想定グループ:
  1) 入力/出力（入力パス/出力パス）
  2) プレビュー対象（Value/プレビューstep）
  3) 色（カラーマップ/最小色/最大色）
  4) スケール（global/manual, vmin/vmax, レンジスライダー）
  5) 解像度（解像度倍率）
  6) 出力オプション（タイトル/目盛/枠線/カラーバー/カラーバー名/フォント/pad）
  7) 出力範囲（出力倍率/ステップ範囲/間引き数）

## ROI配置の変更
- ROIの数値入力/情報表示は右側の編集領域へ移動する。
